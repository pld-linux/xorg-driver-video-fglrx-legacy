diff -Naur a/common/lib/modules/fglrx/build_mod/drm_os_linux.h b/common/lib/modules/fglrx/build_mod/drm_os_linux.h
--- a/common/lib/modules/fglrx/build_mod/drm_os_linux.h	2009-05-27 19:24:11.944421623 -0500
+++ b/common/lib/modules/fglrx/build_mod/drm_os_linux.h	2009-05-27 19:28:12.424780164 -0500
@@ -42,10 +42,12 @@
 #define DRM_IRQ_ARGS		int irq, void *arg, struct pt_regs *regs
 /** backwards compatibility with old irq return values */
 #ifndef IRQ_HANDLED
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,30)
 typedef void irqreturn_t;
 #define IRQ_HANDLED   /* nothing */
 #define IRQ_NONE      /* nothing */
 #endif
+#endif
 
 /** AGP types */
 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,5,70)

diff -Naur a/common/lib/modules/fglrx/build_mod/kcl_pci.c b/common/lib/modules/fglrx/build_mod/kcl_pci.c
--- a/common/lib/modules/fglrx/build_mod/kcl_pci.c	2009-05-31 12:05:01.115508741 -0500
+++ b/common/lib/modules/fglrx/build_mod/kcl_pci.c	2009-05-31 12:06:15.871506492 -0500
@@ -310,3 +310,10 @@
 }
 #endif //__x86_64__
 
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,30)
+#undef pci_enable_msi
+int pci_enable_msi(struct pci_dev *pdev)
+{
+return pci_enable_msi_block(pdev, 1);
+}
+#endif

--- a/common/lib/modules/fglrx/build_mod/firegl_public.c
+++ b/common/lib/modules/fglrx/build_mod/firegl_public.c
@@ -1352,7 +1352,11 @@
    int process_terminated = 1;
   
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,17)  
+#if !defined(CONFIG_PREEMPT_RT)
    rcu_read_lock();
+#else
+   preempt_disable();
+#endif
 #else   
    read_lock(&tasklist_lock);
 #endif   
@@ -1373,7 +1377,11 @@
       }
    }   
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,17)  
+#if !defined(CONFIG_PREEMPT_RT)
    rcu_read_unlock();
+#else
+   preempt_disable();
+#endif
 #else   
    read_unlock(&tasklist_lock);
 #endif   
